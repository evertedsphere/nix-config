{
  config,
  lib,
  pkgs,
  ...
}: {
  services.keyd = {
    enable = true;
    ids = ["*"];
    settings = {
      main = {
        capslock = "overload(control, esc)";
        tab = "overload(meta, tab)";
        rightalt = "layer(bqn)";
        "q" = "q";
        "w" = "w";
        "e" = "f";
        "r" = "p";
        "t" = "b";
        "y" = "j";
        "u" = "l";
        "i" = "u";
        "o" = "y";
        "p" = ";";
        "[" = "[";
        "]" = "]";
        "a" = "a";
        "s" = "r";
        "d" = "s";
        "f" = "t";
        "g" = "g";
        "h" = "m";
        "j" = "n";
        "k" = "e";
        "l" = "i";
        ";" = "o";
        "'" = "'";
        "\\" = "\\";
        "102nd" = "z";
        "z" = "x";
        "x" = "c";
        "c" = "d";
        "v" = "v";
        "b" = "z";
        "n" = "k";
        "m" = "h";
        "," = ",";
        "." = ".";
        "/" = "/";
      };
      bqn = {
        "space" = "â€¿";
        "`" = "Ëœ";
        "1" = "Ë˜";
        "2" = "Â¨";
        "3" = "â¼";
        "4" = "âŒœ";
        "5" = "Â´";
        "6" = "Ë";
        "7" = "space";
        "8" = "âˆ";
        "9" = "Â¯";
        "0" = "â€¢";
        "-" = "Ã·";
        "equal" = "Ã—";
        "q" = "âŒ½";
        "w" = "ğ•¨";
        "e" = "âˆŠ";
        "r" = "â†‘";
        "t" = "âˆ§";
        "u" = "âŠ”";
        "i" = "âŠ";
        "o" = "âŠ";
        "p" = "Î ";
        "[" = "â†";
        "]" = "â†’";
        "a" = "â‰";
        "s" = "ğ•¤";
        "d" = "â†•";
        "f" = "ğ•—";
        "g" = "ğ•˜";
        "h" = "âŠ¸";
        "j" = "âˆ˜";
        "k" = "â—‹";
        "l" = "âŸœ";
        ";" = "â‹„";
        "'" = "â†©";
        "z" = "â¥Š";
        "x" = "ğ•©";
        "c" = "â†“";
        "v" = "âˆ¨";
        "b" = "âŒŠ";
        "m" = "â‰¡";
        "," = "âˆ¾";
        "." = "â‰";
        "/" = "â‰ ";
        # "<" = "â‰¤";
      };
      "bqn+shift" = {
        "`" = "Â¬";
        "1" = "â‰";
        "2" = "âš‡";
        "3" = "âŸ";
        "5" = "âŠ˜";
        "6" = "âŠ";
        "7" = "â";
        "8" = "â•";
        "9" = "âŸ¨";
        "0" = "âŸ©";
        "-" = "âˆš";
        "equal" = "â‹†";
        "q" = "â†™";
        "w" = "ğ•";
        "e" = "â·";
        "r" = "ğ•£";
        "t" = "â‹";
        "i" = "âŠ‘";
        "o" = "âŠ’";
        "p" = "â³";
        "[" = "âŠ£";
        "]" = "âŠ¢";
        "a" = "â†–";
        "s" = "ğ•Š";
        "f" = "ğ”½";
        "g" = "ğ”¾";
        "h" = "Â«";
        "k" = "âŒ¾";
        "l" = "Â»";
        ";" = "Â·";
        "'" = "Ë™";
        "z" = "â‹ˆ";
        "x" = "ğ•";
        "v" = "â’";
        "b" = "âŒˆ";
        "m" = "â‰¢";
        "," = "â‰¤";
        "." = "â‰¥";
        "/" = "â‡";
        # "<" = "â‰¥";
      };
    };
  };
}
